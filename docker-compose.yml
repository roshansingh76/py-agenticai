version: "3.9"

services:
  py-agenticai:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: py-agenticai
    ports:
      - "8000:8000"
    volumes:
      - .:/var/www/html/py-agenticai:delegated
      - ./chroma_db:/var/www/html/py-agenticai/chroma_db
      - py_cache:/root/.cache/pip  # pip cache between rebuilds
    environment:
      - PYTHONUNBUFFERED=1
      - PYTHONDONTWRITEBYTECODE=1
    command: uvicorn src.main:app --host 0.0.0.0 --port 8000 --reload

volumes:
  py_cache:
